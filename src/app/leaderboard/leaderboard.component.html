<div class="titlediv" ><p class="mainfeedtext">LeaderBoard</p></div>
<div class="maindiv" *ngIf="(user$ | async) as user">
  <div *ngIf="!isButtonClicked">
    <table align="center">
      <td align="center">
        <tr><p class="p2">Please click the button below to fetch the current leaderboard!</p></tr>
        <tr><button mat-raised-button (click)="getUsersListAll()"><p class="p3">CLICK HERE TO SEE THE LEADERBOARD</p></button></tr>
      </td>
    </table>
  </div>

  <span *ngIf="this.listUsers != null">
    <div *ngIf="(listUsers | returnsizepipe) >= 3">
      <div class="maindiv">
        <p class="p2">{{(this.listUsers | transformpipe) | returnrankuserpipe: user}}</p><!--userName, you are ranking xth prompt-->
      </div>

      <div class="wrapper">
        <div class="paddingclass">
          <div class="columndiv1t">
            <table align="center">
              <td align="center">
                <tr><br></tr>
                <tr><p class="pclass">{{(this.listUsers | transformpipe) | returnxthpipe: 2}}</p></tr><!--user, x points for 2nd podium-->
              </td>
            </table>
          </div>
          <div *ngIf="(this.listUsers | transformpipe) | returnifxthpipe: 2: user" class="columndiv1user">2</div><!--2nd col, user is 2nd-->
          <div *ngIf="!((this.listUsers | transformpipe) | returnifxthpipe: 2: user)" class="columndiv1">2</div><!--2nd col-->
        </div>

        <div class="columndiv1-2"></div>

        <div class="paddingclass">
          <div class="columndiv2t">
            <p class="pclass">{{(this.listUsers | transformpipe) | returnxthpipe: 1}}</p><!--user, x points for 1st podium-->
          </div>
          <div *ngIf="(this.listUsers | transformpipe) | returnifxthpipe: 1: user" class="columndiv2user">1</div><!--1st col, user is 1st-->
          <div *ngIf="!((this.listUsers | transformpipe) | returnifxthpipe: 1: user)" class="columndiv2">1</div><!--1st col-->
        </div>

        <div class="columndiv2-3"></div>

        <div class="paddingclass">
          <div class="columndiv3t">
            <table align="center">
              <td align="center">
                <tr><br></tr>
                <tr><br></tr>
                <tr><p class="pclass">{{(this.listUsers | transformpipe) | returnxthpipe: 3}}</p></tr><!--user, x points for 3rd podium-->
              </td>
            </table>
          </div>
          <div *ngIf="(this.listUsers | transformpipe) | returnifxthpipe: 3: user" class="columndiv3user">3</div><!--3rd col, user is 3rd-->
          <div *ngIf="!((this.listUsers | transformpipe) | returnifxthpipe: 3: user)" class="columndiv3">3</div><!--3rd col-->
        </div>
      </div>

      <br>

      <span *ngFor="let thisUser of (this.listUsers | transformpipe)">
        <div *ngIf="thisUser.userRank > 3">
          <div *ngIf="filterSelection == 'displayAll'">
            <div *ngIf="thisUser.userUid == user.uid">
              <mat-card class="backgroundcolor">
                <mat-card-content>
                  <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
                  <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--4th and later, print user and user = this user-->
                </mat-card-content>
              </mat-card>
            </div>
            <div *ngIf="thisUser.userUid != user.uid">
              <mat-card>
                <mat-card-content>
                  <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
                  <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--4th and later, print user and user is not this user-->
                </mat-card-content>
              </mat-card>
            </div>
            <br>
          </div>

          <div *ngIf="filterSelection == 'display10'">
            <div *ngIf="thisUser.userRank < 11">
              <div *ngIf="thisUser.userUid == user.uid">
                <mat-card class="backgroundcolor">
                  <mat-card-content>
                    <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
                    <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--4th and later, print user and user = this user-->
                  </mat-card-content>
                </mat-card>
              </div>
              <div *ngIf="thisUser.userUid != user.uid">
                <mat-card>
                  <mat-card-content>
                    <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
                    <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--4th and later, print user and user is not this user-->
                  </mat-card-content>
                </mat-card>
              </div>
              <br>
            </div>
          </div>

          <div *ngIf="filterSelection == 'display15'">
            <div *ngIf="thisUser.userRank < 16">
              <div *ngIf="thisUser.userUid == user.uid">
                <mat-card class="backgroundcolor">
                  <mat-card-content>
                    <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
                    <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--4th and later, print user and user = this user-->
                  </mat-card-content>
                </mat-card>
              </div>
              <div *ngIf="thisUser.userUid != user.uid">
                <mat-card>
                  <mat-card-content>
                    <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
                    <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--4th and later, print user and user is not this user-->
                  </mat-card-content>
                </mat-card>
              </div>
              <br>
            </div>
          </div>
        </div>
      </span>

      <div class="selectfilter">
        <mat-form-field appearance="fill">
          <mat-label>Display options</mat-label>
          <mat-select class="matselect" [(value)]="filterSelection">
            <mat-option value="display10">First 10</mat-option>
            <mat-option value="display15">First 15</mat-option>
            <mat-option value="displayAll">All Users</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div *ngIf="(listUsers | returnsizepipe) < 3">
      <div class="maindiv">
        <p class="p2">{{(this.listUsers | transformpipe) | returnrankuserpipe: user}}</p><!--userName, you are ranking xth prompt-->
      </div>

      <span *ngFor="let thisUser of (this.listUsers | transformpipe)">
        <div *ngIf="thisUser.userUid == user.uid">
          <mat-card class="backgroundcolor">
            <mat-card-content>
              <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
              <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--print user and user = this user-->
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="thisUser.userUid != user.uid">
          <mat-card>
            <mat-card-content>
              <p class="pclass">{{thisUser.userRank}}&nbsp;-&nbsp;{{thisUser.userName}}&nbsp;{{thisUser.userSurname}}</p>
              <p class="pclass">{{thisUser.userPoint}}&nbsp;Points</p><!--print user and user is not this user-->
            </mat-card-content>
          </mat-card>
        </div>

        <br>
      </span>
    </div>
  </span>
</div>
